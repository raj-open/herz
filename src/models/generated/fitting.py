# generated by datamodel-codegen:
#   filename:  schema-fitting.yaml

from __future__ import annotations

from enum import Enum
from typing import List

from pydantic import BaseModel, ConfigDict, Field


class FittedInfoNormalisation(BaseModel):
    """
    Data structure to store information about (pre)normalisation.

    The parameters

    - period = `T`
    - intercept = `c`
    - gradient = `m`
    - scale = `s`

    are defined such that

    - The time-series of the cycle `x` occurs on `[t₀, t₀ + T]` for some `t₀`.
    - `z(t) := (x(t₀ + Tt) - (c + mt))/s` for `t ∈ [0, T]`
      satisfies `z(0) = z(1) = 0` (drift-removal)
      and (L²-norm) ‖z‖ = 1.
    """

    model_config = ConfigDict(
        extra='forbid',
        populate_by_name=True,
    )
    period: float = 1.0
    intercept: float = 0.0
    gradient: float = 0.0
    scale: float = 1.0


class EnumSign(int, Enum):
    """
    Enumeration of classification of signs of (possibly complex) numbers
    """

    ZERO = 0
    REAL_NEGATIVE = -1
    REAL_POSITIVE = 1
    NON_ZERO = 2


class EnumExtremePoints(str, Enum):
    """
    Enumeration of extreme point types.
    """

    PEAK = 'peak'
    TROUGH = 'trough'


class FittedInfo(BaseModel):
    """
    Data structure to store information about fitted curves.
    """

    model_config = ConfigDict(
        extra='forbid',
        populate_by_name=True,
    )
    coefficients: List[float] = Field(
        [], description='Coefficients of polynomial that fits (pre-normalised) cycle.'
    )
    normalisation: FittedInfoNormalisation = Field(
        ...,
        description='Pre-normalisation of cycle before curves is fit.\nThis is used so that fitted curves for multiple cycles can be\ncompared and combined to a single curve\nthat fits all cycles simultaneously.',
    )
